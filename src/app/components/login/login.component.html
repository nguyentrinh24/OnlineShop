<div class="login-backdrop" (click)="closeLoginPopup()"></div>

<div class="login-modal">
  <form #loginForm="ngForm" (ngSubmit)="login()" novalidate>
    <div class="login-form">
      <!-- Nút đóng trong form -->
      <button class="login-close" (click)="closeLoginPopup()" aria-label="Đóng">&times;</button>

      <h2 class="login-header">Đăng nhập</h2>

      <!-- Số điện thoại -->
      <div class="form-group">
        <label for="phoneNumber">Số điện thoại</label>
        <input
          type="text"
          class="form-control"
          id="phoneNumber"
          name="phone"
          [(ngModel)]="phoneNumber"
          required
          placeholder="Nhập số điện thoại"
          (keydown.enter)="login()"
        />
      </div>

      <!-- Mật khẩu -->
      <div class="form-group">
        <label for="password">Mật khẩu</label>
        <div class="input-password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            name="password"
            [(ngModel)]="password"
            placeholder="Nhập mật khẩu "
            class="form-control"
            required
            minlength="3"
            (keydown.enter)="login()"
          />
          <i
            class="password-toggle fas"
            [ngClass]="showPassword ? 'fa-eye' : 'fa-eye-slash'"
            (click)="togglePassword()"
          ></i>
        </div>
      </div>

      <!-- Ghi nhớ + Quên mật khẩu -->
      <div class="checkbox-remember-forgot">
        <label>
          <input
            type="checkbox"
            class="form-check-input"
            [(ngModel)]="rememberMe"
            name="rememberMe"
          />
          Ghi nhớ đăng nhập
        </label>
        <a class="register-link" href="#" (click)="onForgotPasswordClick(); $event.preventDefault()">Quên mật khẩu</a>
      </div>

      <!-- Nút đăng nhập -->
      <button type="submit" class="login-button" [disabled]="isLoading">
        <span *ngIf="!isLoading">Đăng nhập</span>
        <span *ngIf="isLoading">Đang đăng nhập...</span>
      </button>

      <div class="divider"></div>

      <!-- Button đăng nhập bằng Google -->
      <button type="button" class="google-login-button">
        <img
          src="https://developers.google.com/identity/images/g-logo.png"
          alt="Google logo"
          width="20"
          height="20"
        />
        Đăng nhập bằng Google
      </button>
      
      

      <div class="divider"></div>

      <p class="text-center">
        Bạn chưa có tài khoản?
        <a class="register-link" (click)="createAccount()">Tạo tài khoản</a>
      </p>
    </div>
  </form>
</div>

<app-forgot-password-modal *ngIf="showForgotPasswordModal" (submit)="onForgotPasswordSubmit($event)" (cancel)="onForgotPasswordCancel()"></app-forgot-password-modal>
